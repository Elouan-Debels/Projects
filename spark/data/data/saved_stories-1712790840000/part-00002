{"aid": "39993147", "title": "Loki 3.0 release: Bloom filters, native OpenTelemetry support, and more", "url": "https://grafana.com/blog/2024/04/09/grafana-loki-3.0-release-all-the-new-features/", "domain": "grafana.com", "votes": 1, "user": "infomaniac", "posted_at": "2024-04-10 17:11:33", "comments": 0, "source_title": "Loki 3.0 release: Bloom filters, native OpenTelemetry support, and more! | Grafana Labs", "source_text": "Loki 3.0 release: Bloom filters, native OpenTelemetry support, and more! | Grafana Labs\n\n  * Products Open source Solutions Learn Docs Company\n\n  * Downloads Contact us Sign in\n\nCreate free account Contact us\n\nProducts\n\nCore LGTM Stack\n\nLogs\n\npowered by Grafana Loki\n\nGrafana\n\nfor visualization\n\nTraces\n\npowered by Grafana Tempo\n\nMetrics\n\npowered by Grafana Mimir and Prometheus\n\nextend observability\n\nPerformance & load testing\n\npowered by Grafana k6\n\nContinuous profiling\n\npowered by Grafana Pyroscope\n\nPlugins\n\nConnect Grafana to data sources, apps, and more\n\nend-to-end solutions\n\nApplication Observability\n\nMonitor application performance\n\nFrontend Observability\n\nGain real user monitoring insights\n\nIncident Response & Management\n\nwith Grafana Alerting, Grafana Incident, Grafana OnCall, and Grafana SLO\n\nDeploy The Stack\n\nGrafana Cloud\n\nFully managed\n\nGrafana Enterprise\n\nSelf-managed\n\nPricing\n\nHint: It starts at FREE\n\nOpen Source\n\nGrafana Loki\n\nMulti-tenant log aggregation system\n\nGrafana\n\nQuery, visualize, and alert on data\n\nGrafana Tempo\n\nHigh-scale distributed tracing backend\n\nGrafana Mimir\n\nScalable and performant metrics backend\n\nGrafana OnCall\n\nOn-call management\n\nGrafana Pyroscope\n\nScalable continuous profiling backend\n\nGrafana Beyla\n\neBPF auto-instrumentation\n\nGrafana Faro\n\nFrontend application observability web SDK\n\nGrafana Alloy\n\nOpenTelemetry Collector distribution with Prometheus pipelines\n\nGrafana k6\n\nLoad testing for engineering teams\n\nPrometheus\n\nMonitor Kubernetes and cloud native\n\nOpenTelemetry\n\nInstrument and collect telemetry data\n\nGraphite\n\nScalable monitoring for time series data\n\nCommunity resources\n\nDashboard templates\n\nTry out and share prebuilt visualizations\n\nPrometheus exporters\n\nGet your metrics into Prometheus quickly\n\nend-to-end solutions\n\nOpinionated solutions that help you get there easier and faster\n\nKubernetes Monitoring\n\nGet K8s health, performance, and cost monitoring from cluster to container\n\nApplication Observability\n\nMonitor application performance\n\nFrontend Observability\n\nGain real user monitoring insights\n\nIncident Response & Management\n\nDetect and respond to incidents with a simplified workflow\n\nmonitor infrastructure\n\nOut-of-the-box KPIs, dashboards, and alerts for observability\n\nLinux\n\nWindows\n\nDocker\n\nPostgres\n\nMySQL\n\nAWS\n\nKafka\n\nJenkins\n\nRabbitMQ\n\nMongoDB\n\nvisualize any data\n\nInstantly connect all your data sources to Grafana\n\nMongoDB\n\nAppDynamics\n\nOracle\n\nGitLab\n\nJira\n\nSalesforce\n\nSplunk\n\nDatadog\n\nNew Relic\n\nSnowflake\n\nLearn\n\nStay up to date\n\nGrafanaCON 2024\n\nOur biggest community event\n\nSold Out\n\nObservabilityCON on the Road 2024\n\nOpen source observability conference\n\nStory of Grafana\n\n10 years of Grafana\n\nObservability Survey 2024\n\nKey findings and results\n\nNew\n\nBlog\n\nNews, releases, cool stories, and more\n\nEvents\n\nUpcoming in-person and virtual events\n\nSuccess stories\n\nBy use case, product, and industry\n\nTechnical learning\n\nDocumentation\n\nAll the docs\n\nWebinars and videos\n\nDemos, webinars, and feature tours\n\nTutorials\n\nStep-by-step guides\n\nWorkshops\n\nFree, in-person or online\n\nWriters' Toolkit\n\nContribute to technical documentation provided by Grafana Labs\n\nPlugin development\n\nVisit the Grafana developer portal for tools and resources for extending\nGrafana with plugins.\n\nnew\n\nJoin the community\n\nCommunity\n\nJoin the Grafana community\n\nnew\n\nCommunity forums\n\nAsk the community for help\n\nCommunity Slack\n\nReal-time engagement\n\nGrafana Champions\n\nContribute to the community\n\nnew\n\nCommunity organizers\n\nHost local meetups\n\nnew\n\nDocs\n\nGrafana Cloud\n\nGrafana\n\nGrafana Alloy\n\nGrafana Loki\n\nGrafana Mimir\n\nGrafana Tempo\n\nGrafana Pyroscope\n\nGrafana OnCall\n\nApplication Observability\n\nGrafana Faro\n\nGrafana Beyla\n\nGrafana k6\n\nPrometheus\n\nGrafana Enterprise\n\nGrafana Enterprise Logs\n\nGrafana Enterprise Traces\n\nGrafana Enterprise Metrics\n\nEnterprise plugins\n\nCommunity plugins\n\nGrafana Alerting\n\nVisit Docs\n\nGet started\n\nGet Started with Grafana\n\nBuild your first dashboard\n\nGetting started with Grafana Cloud\n\nWhat's new / Release notes\n\nCompany\n\nOur team\n\nCareers We're hiring\n\nEvents\n\nPartnerships\n\nNewsroom\n\nContact us\n\nMerch\n\nHelp build the future of open source observability software Open positions\n\nCheck out the open source projects we support Downloads\n\nSign in\n\nCore LGTM Stack\n\nLogs\n\npowered by Grafana Loki\n\nGrafana\n\nfor visualization\n\nTraces\n\npowered by Grafana Tempo\n\nMetrics\n\npowered by Grafana Mimir and Prometheus\n\nextend observability\n\nPerformance & load testing\n\npowered by Grafana k6\n\nContinuous profiling\n\npowered by Grafana Pyroscope\n\nPlugins\n\nConnect Grafana to data sources, apps, and more\n\nend-to-end solutions\n\nApplication Observability\n\nMonitor application performance\n\nFrontend Observability\n\nGain real user monitoring insights\n\nIncident Response & Management\n\nwith Grafana Alerting, Grafana Incident, Grafana OnCall, and Grafana SLO\n\nDeploy The Stack\n\nGrafana Cloud\n\nFully managed\n\nGrafana Enterprise\n\nSelf-managed\n\nPricing\n\nHint: It starts at FREE\n\nGrafana Cloud\n\nFree forever plan\n\n(Surprise: it\u2019s actually useful)\n\n  * Grafana, of course\n  * 14 day retention\n  * 10k series Prometheus metrics\n  * 500 VUh k6 testing\n  * 50 GB logs, traces, and profiles\n  * 50k frontend sessions\n  * and more cool stuff\n\nCreate free account\n\nNo credit card needed, ever.\n\nGrafana Loki\n\nMulti-tenant log aggregation system\n\nGrafana\n\nQuery, visualize, and alert on data\n\nGrafana Tempo\n\nHigh-scale distributed tracing backend\n\nGrafana Mimir\n\nScalable and performant metrics backend\n\nGrafana OnCall\n\nOn-call management\n\nGrafana Pyroscope\n\nScalable continuous profiling backend\n\nGrafana Beyla\n\neBPF auto-instrumentation\n\nGrafana Faro\n\nFrontend application observability web SDK\n\nGrafana Alloy\n\nOpenTelemetry Collector distribution with Prometheus pipelines\n\nGrafana k6\n\nLoad testing for engineering teams\n\nPrometheus\n\nMonitor Kubernetes and cloud native\n\nOpenTelemetry\n\nInstrument and collect telemetry data\n\nGraphite\n\nScalable monitoring for time series data\n\nCommunity resources\n\nDashboard templates\n\nTry out and share prebuilt visualizations\n\nPrometheus exporters\n\nGet your metrics into Prometheus quickly\n\nend-to-end solutions\n\nOpinionated solutions that help you get there easier and faster\n\nKubernetes Monitoring\n\nGet K8s health, performance, and cost monitoring from cluster to container\n\nApplication Observability\n\nMonitor application performance\n\nFrontend Observability\n\nGain real user monitoring insights\n\nIncident Response & Management\n\nDetect and respond to incidents with a simplified workflow\n\nmonitor infrastructure\n\nOut-of-the-box KPIs, dashboards, and alerts for observability\n\nLinux\n\nWindows\n\nDocker\n\nPostgres\n\nMySQL\n\nAWS\n\nKafka\n\nJenkins\n\nRabbitMQ\n\nMongoDB\n\nvisualize any data\n\nInstantly connect all your data sources to Grafana\n\nMongoDB\n\nAppDynamics\n\nOracle\n\nGitLab\n\nJira\n\nSalesforce\n\nSplunk\n\nDatadog\n\nNew Relic\n\nSnowflake\n\nAll monitoring and visualization solutions\n\nStay up to date\n\nGrafanaCON 2024\n\nOur biggest community event\n\nSold Out\n\nObservabilityCON on the Road 2024\n\nOpen source observability conference\n\nStory of Grafana\n\n10 years of Grafana\n\nObservability Survey 2024\n\nKey findings and results\n\nNew\n\nBlog\n\nNews, releases, cool stories, and more\n\nEvents\n\nUpcoming in-person and virtual events\n\nSuccess stories\n\nBy use case, product, and industry\n\nTechnical learning\n\nDocumentation\n\nAll the docs\n\nWebinars and videos\n\nDemos, webinars, and feature tours\n\nTutorials\n\nStep-by-step guides\n\nWorkshops\n\nFree, in-person or online\n\nWriters' Toolkit\n\nContribute to technical documentation provided by Grafana Labs\n\nPlugin development\n\nVisit the Grafana developer portal for tools and resources for extending\nGrafana with plugins.\n\nnew\n\nJoin the community\n\nCommunity\n\nJoin the Grafana community\n\nnew\n\nCommunity forums\n\nAsk the community for help\n\nCommunity Slack\n\nReal-time engagement\n\nGrafana Champions\n\nContribute to the community\n\nnew\n\nCommunity organizers\n\nHost local meetups\n\nnew\n\nFeatured\n\nGetting started with the Grafana LGTM Stack\n\nWe\u2019ll demo how to get started using the LGTM Stack: Loki for logs, Grafana for\nvisualization, Tempo for traces, and Mimir for metrics.\n\nWatch now \u2192\n\nGrafana Cloud\n\nGrafana\n\nGrafana Alloy\n\nGrafana Loki\n\nGrafana Mimir\n\nGrafana Tempo\n\nGrafana Pyroscope\n\nGrafana OnCall\n\nApplication Observability\n\nGrafana Faro\n\nGrafana Beyla\n\nGrafana k6\n\nPrometheus\n\nGrafana Enterprise\n\nGrafana Enterprise Logs\n\nGrafana Enterprise Traces\n\nGrafana Enterprise Metrics\n\nEnterprise plugins\n\nCommunity plugins\n\nGrafana Alerting\n\nVisit Docs\n\nGet started\n\nGet Started with Grafana\n\nBuild your first dashboard\n\nGetting started with Grafana Cloud\n\nWhat's new / Release notes\n\nGrafana: 11.0\n\nGrafana Mimir: 2.9\n\nLoki: 3.0\n\nTempo: 2.4\n\nOur team\n\nCareers We're hiring\n\nEvents\n\nPartnerships\n\nNewsroom\n\nContact us\n\nMerch\n\nGrot cannot remember your choice unless you click the consent notice at the\nbottom.\n\nI am Grot. Ask me anything\n\n# Loki 3.0 release: Bloom filters, native OpenTelemetry support, and more!\n\nSalva Corts, Sandeep Sukhani, Steven Dungan, Julie Stickler\n\n\u2022 9 Apr, 2024 \u2022 7 min\n\nWelcome to the next chapter of Grafana Loki! After five years of dedicated\ndevelopment, countless hours of refining, and the support of an incredible\ncommunity, we are thrilled to announce that Grafana Loki 3.0 is now generally\navailable.\n\nThe journey from 2.0 to 3.0 saw a lot of impressive changes to Loki. Loki is\nnow more performant, and it\u2019s capable of handling larger scales \u2014 all while\nremaining true to its roots of efficiency and simplicity.\n\nThe progress has been tremendously well-received by the community (who, by the\nway, we cannot thank enough for helping us get here!). We hit, and blew right\npast, some very cool milestones over the past year \u2014 20,000 GitHub stars and\nmore than 100,000 active clusters, to name a few.\n\nWith Loki 3.0, we\u2019re excited to build on the project\u2019s success and introduce\nsome very cool features. Read on, and you\u2019ll see how we are staying true to\nour Loki roots \u2014 simplicity at scale and making the right tradeoffs for\ndevelopers \u2014 while also making further strides to make Loki the easiest logs\naggregation platform for developers (and more!) to use.\n\nLet\u2019s dive in!\n\n## Query acceleration with Bloom filters\n\nWe\u2019re excited to share one of the coolest new additions to Loki 3.0: query\nacceleration with Bloom filters, an experimental feature that allows you to\nfind the specific log data you\u2019re looking for faster than ever.\n\nImagine trying to find a single, specific message hidden among millions of\nmessages \u2014 it\u2019s like looking for a needle in a haystack. Loki was built to\nfind your log data very quickly when you know roughly where to look (in other\nwords, some label selectors to filter on); but now, with the query\nacceleration that comes with Bloom filters, we will be able to support this\n\u201cneedle in a haystack\u201d use case much better.\n\nBefore Bloom filters, Loki had to look at every. single. log. line. within all\nmatching streams to find what you needed. If you wanted to find one piece of\ninformation from yesterday\u2019s data, Loki would have to load everything from\nthat day and check each log line one by one. As the amount of log data stored\nincreases, Loki would require more compute power to process the data at query\ntime. Because Grafana Labs operates Loki at scale, we saw an opportunity to\noptimize filtering specific data amidst a whole sea of data.\n\nThis is where Bloom filters come in, making Loki a lot smarter and more\nefficient when searching through log data. Instead of checking every log,\nBloom filters enable Loki to search for strings, such as order ID or user ID,\nskipping large chunks of data that don\u2019t contain the information you\u2019re\nseeking. It\u2019s like having a map that shows where the needle might be in the\nhaystack, so you don\u2019t have to search the whole thing.\n\nAnd all signs point to Bloom filters being really effective. Early internal\ntests suggest that with Bloom filters, Loki can skip a significant percentage\nof log data while running queries. Our dev environment tests show that we can\nnow filter out between 70% and 90% of the chunks we previously needed to\nprocess a query.\n\nHere is an example of the results we\u2019re seeing when running one of these\n\u201cneedle in a haystack\u201d searches with Bloom filters. This query includes\nseveral filtering conditions and represents a typical use case we\u2019ve seen our\ncustomers run on Grafana Cloud Logs, which is powered by Loki. You\u2019ll see the\nnumber of chunks and streams we are bypassing:\n\nThe results are fantastic! Touching less data means faster search return\ntimes, and less strain on resources.\n\nThis is an extremely promising experimental feature, with an even more\npromising future as we make it simpler and even faster in Loki! To read more\nabout query acceleration, and learn about how to enable Bloom filters in your\nLoki cluster, check out our accelerated queries documentation.\n\n## Native OpenTelemetry support\n\nThe Loki team recognizes that OpenTelemetry is quickly gaining adoption. In\nour 2024 Observability Survey, 54% of the respondents said they were using\nOpenTelemetry more than they did last year. OpenTelemetry aims to provide a\nvendor-agnostic way to easily instrument applications or systems, regardless\nof their language, infrastructure, or runtime environment. This vision aligns\nstrongly with Loki\u2019s principle of meeting users where they are.\n\nWhile it was already possible to ingest OTel logs to Loki using Loki Exporter,\nit didn\u2019t provide an optimal querying experience. This previous method\nserialized data in JSON, which then required deserializing it at query time to\ninteract with OTel attributes and metadata in log records. Doable, but not\nsimple.\n\nTo provide a native OTel logging experience to users opting for OpenTelemetry,\nwe have added native OpenTelemetry ingestion support to Loki 3.0.\n\nHere are some of the benefits that Loki\u2019s native OpenTelemetry endpoint brings\nin over the Loki Exporter:\n\n  * Simplified ingestion pipeline: By eliminating the need to put the Loki Exporter between an OpenTelemetry collector (such as Grafana Alloy) and Grafana Cloud, your log ingestion pipeline looks much more simplified. You can easily switch from any other OTel-compatible log storage to Loki by just updating the endpoint.\n  * Improved querying experience: By leveraging structured metadata, Loki\u2019s native OpenTelemetry implementation lets you interact with all the OpenTelemetry attributes and log event metadata at query time without having to do any deserialization. Here are some example screen captures showing how it\u2019s much easier to query OTel logs ingested via Loki\u2019s native OTel ingestion endpoint vs. the Loki Exporter:\n\nOld format (Loki Exporter)New format (OTLP Endpoint)\n\nHere is how OpenTelemetry logs are stored in Loki:\n\n  * Index: Resource attributes map well to index labels in Loki since both usually identify the source of the logs. Because Loki works well with a limited set of index labels, Loki, by default, selects a few key attributes to be stored as index labels, while the remaining resource attributes are stored as structured metadata with each log entry.\n  * Timestamp: One of LogRecord.TimeUnixNano or LogRecord.ObservedTimestamp, based on which one is set. If both are not set, the ingestion timestamp will be used.\n  * LogLine: LogRecord.Body holds the log\u2019s body. However, since Loki only supports log bodies in string format, we will stringify non-string values using the AsString method from the OTEL collector lib.\n  * Structured metadata: Anything that can\u2019t be stored in index labels and LogLine would be stored as structured metadata.\n\nCheck out our docs for more details on how OTel logs are stored in Loki and\nhow to change the way data is stored in Loki with a per-tenant OTLP config.\n\n## Loki documentation improvements\n\nLoki is all about simplicity, and we believe that better documentation makes\nour products easier to use. Both the Documentation and Engineering teams have\nbeen working on updating the Loki documentation to make it easier for new\nusers to get started.\n\nIn addition to refreshing content in the Get Started section, we\u2019ve introduced\na new Quickstart topic that walks you through several sample queries so that\nyou can see your log data in Grafana. We\u2019ve also polished a few of our most\nvisited sections: API docs, Configuration reference, and Storage documentation\nhave all been updated to reflect deprecations and outdated configuration\noptions have been removed.\n\nGrafana Enterprise Logs (GEL) documentation has also been reorganized, and\nstale Loki content has been updated.\n\n## \u2018I don\u2019t want to learn LogQL\u2019\n\nOops... wrong blog! You\u2019ll have to check out our other post about Explore Logs\nto learn what this is all about.\n\n## Cleaning up the campsite, and a word about upgrading\n\nWe took the opportunity of this major release to make several quality-of-life\nimprovements for both users and maintainers to help make Loki easier to use.\nThis includes improvements to our Helm chart, so that it can be easier than\never to run Loki. Please carefully review our release notes and upgrade guide\nas you go try Loki 3.0 out for yourself!\n\nWe\u2019ve also used this Loki 3.0 release to align the semantic versioning of\nLoki, our open source offering, and Grafana Enterprise Logs (GEL), our\nenterprise offering that is powered by Loki. GEL 3.0 will be released on April\n11. If you are using Grafana Enterprise Logs (GEL), again, please check out\nthe release notes when available and related documentation before upgrading to\nGEL 3.0.\n\n## Thank you to the Grafana Loki community!\n\nGetting to Loki 3.0 was a community effort. On behalf of Grafana Labs and the\nLoki team, we sincerely want to thank all of our users and contributors for\ntheir efforts and commitment.\n\nWe\u2019d love to hear your feedback! Drop into the #loki-3 channel on Grafana Labs\nCommunity Slack or find Loki on GitHub and let us know what you think.\n\nGrafana Cloud is the easiest way to get started with metrics, logs, traces,\ndashboards, and more. We have a generous forever-free tier and plans for every\nuse case. Sign up for free now!\n\nTags\n\nLoki\n\nGrafanaCon\n\nOn this page\n\nScroll for more\n\nRegistration is open! Join us in a city near you to hear the latest\nobservability features, get a demo of new cost management tools, & discover\nAI/ML-powered features to speed up innovation.\n\nSign up\n\nKeynote Recap\n\nOur in-person event is sold out! Get exclusive access to the keynote recap and\nhear about the latest features in Grafana 11, innovations across the LGTM\n(Loki-Grafana-Tempo-Mimir) Stack, and more!\n\nRegister now\n\nGrafana Cloud\n\n  * Grafana, of course\n  * 10k series Prometheus metrics\n  * 50 GB logs\n  * 50 GB traces\n  * 50k frontend sessions\n  * 500 VUh k6 testing\n\nCreate free account\n\nNo credit card needed, ever.\n\nBecome a Champion\n\nHelping others embodies the spirit of open source, and we want to celebrate\nyour invaluable contributions.\n\nBecome a Champion\n\nGolden Grots\n\nHelping others embodies the spirit of open source, and we want to celebrate\nyour invaluable contributions.\n\nSubmit your dashboard\n\nBecome a Contributor\n\nHelping others embodies the spirit of open source, and we want to celebrate\nyour invaluable contributions.\n\nBecome a Contributor\n\nFree Forever plan:\n\n10,000 series metrics\n\n14-day retention\n\n50GB of logs and traces\n\n50GB of profiles\n\n500VUh of k6 testing\n\n3 team members\n\nCreate free account \u2192\n\nIntroducing\n\nFrontend Observability\n\nOur hosted service for real user monitoring. Gain precise, end-to-end user\ninsights.\n\nSign up for free Read the blog\n\n  * Reduce metric cardinality by 30-50%\n  * Pay only for metrics you use\n  * Centralize control over your data in Grafana Cloud\n\nCreate free account Read the blog post\n\nGain insight into unused metrics and optimize metric cardinality with the new\ncardinality management dashboards and Adaptive Metrics\n\nCreate free account Read the blog post\n\n### Up next\n\nMichelle Tan \u00b7 9 Apr 2024 \u00b7 6 min read\n\n### GrafanaCON 2024: A guide to all the announcements from Grafana Labs\n\nCatch up on all the latest news out of GrafanaCON 2024, including the release\nof Grafana 11 and Grafana Loki 3.0.\n\nGrafana\n\nEvents\n\nCommunity\n\nCompany news\n\nGrafanaCon\n\nRead more\n\nMitch Seaman \u00b7 9 Apr 2024 \u00b7 10 min read\n\n### Grafana 11 release: The latest in visualizations, Scenes-powered\ndashboards, simple access controls,...\n\nLearn about all the latest features in the Grafana 11 release.\n\nGrafana\n\nGrafanaCon\n\nRead more\n\nMat Ryer \u00b7 9 Apr 2024 \u00b7 8 min read\n\n### Find your logs data with Explore Logs: No LogQL required!\n\nLearn all about Explore Logs, a new way to browse your logs in Grafana 11 and\nLoki 3.0 without writing LogQL.\n\nLoki\n\nLogging\n\nGrafanaCon\n\nRead more\n\nSign up for Grafana stack updates\n\nNote: By signing up, you agree to be emailed related product-level\ninformation.\n\nGrafana Cloud Status\n\nSitemap\n\nLegal and Security\n\nTerms of Service\n\nPrivacy Policy\n\nTrademark Policy\n\nCopyright 2024 \u00a9 Grafana Labs\n\nGrafana Labs uses cookies for the normal operation of this website. Learn\nmore.\n\n", "frontpage": false}
