{"aid": "39994666", "title": "GlitchTip 4.0 Released", "url": "https://glitchtip.com/blog/2024-04-08-glitchtip-4-0-release/", "domain": "glitchtip.com", "votes": 1, "user": "gslin", "posted_at": "2024-04-10 19:16:31", "comments": 0, "source_title": "GlitchTip", "source_text": "GlitchTip | GlitchTip 4.0 Released\n\nPricingBlogDocumentationDocsLoginRegister\n\n# Major version update\n\nGlitchTip's new release includes a major overhaul of how the app handles\nevents aimed at significantly improving its performance and ability to\nreliably field large volumes of data. As always, we aim to make the upgrade\nprocess as easy as possible for sysadmins. GlitchTip 4.0 includes a migration\nfor moving a limited volume of existing issue and event data to new database\ntables and dropping older data. If you are already using GlitchTip 3.x and\ndon't need to preserve large amounts of older event data, you can go ahead and\nupgrade now. However, if you want to increase the amount of data preserved in\nthe migration, read on for more details.\n\n## Upgrade considerations\n\n  * By default, GlitchTip 4.0 will migrate the most recent 50,000 issues in your GlitchTip instance. This number can be changed with the environment variable ISSUE_EVENT_MIGRATION_LIMIT. Additionally, it will only migrate up to 1,000 events per issue, which can be adjusted via the EVENT_PER_ISSUE_MIGRATION_LIMIT environment variable. In our testing, the migration has taken approximately 5 minutes per 50,000 issues. During this time, the processing of new events will be queued in redis, so you will not see new events appear until the migration is complete.\n\n  * We do not support upgrading multiple major versions such as 2.x to 4.x. If you haven't upgraded GlitchTip in the past year, you will want to upgrade to the latest 3.x release before upgrading to 4.0.\n\n  * We aim to maintain API compatibility, but with a large refactor this is hard to guarantee. Test your third party integrations before upgrading.\n\n## app.glitchtip.com upgrade\n\nWe will be upgrading our hosted instance at app.glitchtip.com to this new\nversion on Friday, April 12, at 14:00 UTC. We expect the upgrade to take about\n35 minutes. In this time, incoming events will still be received but they will\nnot be processed until the upgrade is complete. We will be migrating as many\nold issues as we can reasonably accommodate without excessive service\ninterruption, but please be advised that not all issues will be carried over.\n\n## Improvements\n\nOur primary focus in GlitchTip 4.0 has been on improving performance and\nreducing system requirements. GlitchTip is not a venture capital backed\ncompany that can deploy ever-larger databases. Run by volunteers and supported\nby donations, it is important that we remain resource-light.\n\n  * Event ingest rewritten to be more performant.\n  * Data stored in Postgres table partitions. Dropping the old partition tables is also much faster than deleting rows nightly.\n  * Event ingest APIs sped up - quickly checking permissions and then forwarding the task to a celery background worker.\n  * All events saved in bulk batches. By default, GlitchTip celery workers will wait up to 2 seconds to batch new events before saving them. We believe such a small delay is unlikely to be noticed. Work that was previously done in Postgres was moved to Python, which is far easier to scale as needed.\n  * New async Django views using django-ninja for our API. By default, uwsgi is still used and runs synchronously. In a future major version, we aim to enable async Python by default.\n  * New API documentation\n  * Free text search indexing for issues reduced to specifically selected fields, such as title. We found that Postgres GIN indexes on frequently updated tables grow infinitely large and slow. While reindexing mitigates this, we decided to be more selective in our search index.\n\n# Support GlitchTip\n\nYour time and financial donations are the only thing that keeps GlitchTip\ndevelopment going. GlitchTip is not backed by venture capital.\n\n  * \ud83d\udcb8 Donate via Liberapay. We currently receive $8.90 per week from 15 patrons.\n  * \u2b50 on GitLab. Help us reach 200 stars!\n  * \u2764\ufe0f on AlternativeTo and leave a review. AlternativeTo generates significant website traffic.\n  * \u2b50 on dockerhub where we have over 2 million pulls\n  * \u23e9 Follow on Mastodon\n  * Talk to us on Gitter\n\nGlitchTip, by Burke Software and Consulting\n\nTerms of Service\n\nPrivacy Policy\n\n  * Gitter\n  * GitLab\n  * Mastodon\n  * Email\n\nPricingBlogDocumentationDocsLoginRegister\n\n# GlitchTip 4.0 Released\n\n# Major version update\n\nGlitchTip's new release includes a major overhaul of how the app handles\nevents aimed at significantly improving its performance and ability to\nreliably field large volumes of data. As always, we aim to make the upgrade\nprocess as easy as possible for sysadmins. GlitchTip 4.0 includes a migration\nfor moving a limited volume of existing issue and event data to new database\ntables and dropping older data. If you are already using GlitchTip 3.x and\ndon't need to preserve large amounts of older event data, you can go ahead and\nupgrade now. However, if you want to increase the amount of data preserved in\nthe migration, read on for more details.\n\n## Upgrade considerations\n\n  * By default, GlitchTip 4.0 will migrate the most recent 50,000 issues in your GlitchTip instance. This number can be changed with the environment variable ISSUE_EVENT_MIGRATION_LIMIT. Additionally, it will only migrate up to 1,000 events per issue, which can be adjusted via the EVENT_PER_ISSUE_MIGRATION_LIMIT environment variable. In our testing, the migration has taken approximately 5 minutes per 50,000 issues. During this time, the processing of new events will be queued in redis, so you will not see new events appear until the migration is complete.\n\n  * We do not support upgrading multiple major versions such as 2.x to 4.x. If you haven't upgraded GlitchTip in the past year, you will want to upgrade to the latest 3.x release before upgrading to 4.0.\n\n  * We aim to maintain API compatibility, but with a large refactor this is hard to guarantee. Test your third party integrations before upgrading.\n\n## app.glitchtip.com upgrade\n\nWe will be upgrading our hosted instance at app.glitchtip.com to this new\nversion on Friday, April 12, at 14:00 UTC. We expect the upgrade to take about\n35 minutes. In this time, incoming events will still be received but they will\nnot be processed until the upgrade is complete. We will be migrating as many\nold issues as we can reasonably accommodate without excessive service\ninterruption, but please be advised that not all issues will be carried over.\n\n## Improvements\n\nOur primary focus in GlitchTip 4.0 has been on improving performance and\nreducing system requirements. GlitchTip is not a venture capital backed\ncompany that can deploy ever-larger databases. Run by volunteers and supported\nby donations, it is important that we remain resource-light.\n\n  * Event ingest rewritten to be more performant.\n  * Data stored in Postgres table partitions. Dropping the old partition tables is also much faster than deleting rows nightly.\n  * Event ingest APIs sped up - quickly checking permissions and then forwarding the task to a celery background worker.\n  * All events saved in bulk batches. By default, GlitchTip celery workers will wait up to 2 seconds to batch new events before saving them. We believe such a small delay is unlikely to be noticed. Work that was previously done in Postgres was moved to Python, which is far easier to scale as needed.\n  * New async Django views using django-ninja for our API. By default, uwsgi is still used and runs synchronously. In a future major version, we aim to enable async Python by default.\n  * New API documentation\n  * Free text search indexing for issues reduced to specifically selected fields, such as title. We found that Postgres GIN indexes on frequently updated tables grow infinitely large and slow. While reindexing mitigates this, we decided to be more selective in our search index.\n\n# Support GlitchTip\n\nYour time and financial donations are the only thing that keeps GlitchTip\ndevelopment going. GlitchTip is not backed by venture capital.\n\n  * \ud83d\udcb8 Donate via Liberapay. We currently receive $8.90 per week from 15 patrons.\n  * \u2b50 on GitLab. Help us reach 200 stars!\n  * \u2764\ufe0f on AlternativeTo and leave a review. AlternativeTo generates significant website traffic.\n  * \u2b50 on dockerhub where we have over 2 million pulls\n  * \u23e9 Follow on Mastodon\n  * Talk to us on Gitter\n\nGlitchTip, by Burke Software and Consulting\n\nTerms of Service\n\nPrivacy Policy\n\n  * Gitter\n  * GitLab\n  * Mastodon\n  * Email\n\n", "frontpage": false}
