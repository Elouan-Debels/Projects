{"aid": "40002607", "title": "The PicoLisp Ticker and GoogleBot", "url": "https://picolisp.com/wiki/?ticker", "domain": "picolisp.com", "votes": 1, "user": "goranmoomin", "posted_at": "2024-04-11 14:31:42", "comments": 0, "source_title": "PicoLisp Wiki: ticker", "source_text": "PicoLisp Wiki: ticker\n\n  * Download\n  * Documentation\n  * community\n  * Impressum & Datenschutz\n\nLog in\n\n## The PicoLisp Ticker\n\nAround end of May, I was playing with an algorithm I had received from Bengt\nGrahn, many years ago. A small program - it was even part of the PicoLisp\ndistribution (\"misc/crap.l\") for many years - which when given an arbitrary\nsample text in some language, produces an endless stream of pseudo-text which\nstrongly resembles that language.\n\nIt was fun, so I decided to set up a PicoLisp \"Ticker\" page, producing a\nstream of \"news\": http://ticker.picolisp.com\n\nThe source for the server is simple:\n\n    \n    \n    (allowed () *Page \"!start\" \"@lib.css\" \"ticker.zip\" ) (load \"@lib/http.l\" \"@lib/xhtml.l\") (load \"misc/crap.l\") (one *Page) (de start () (seed (time)) (html 0 \"PicoLisp Ticker\" \"@lib.css\" NIL (<h2> NIL \"Page \" *Page) (<div> 'em50 (do 3 (<p> NIL (crap 4))) (<spread> (<href> \"Sources\" \"ticker.zip\") (<this> '*Page (inc *Page) \"Next page\") ) ) ) ) (de main () (learn \"misc/ticker.txt\") ) (de go () (server 21000 \"!start\") )\n\nThe sample text for the learning phase, \"misc/ticker.txt\", is a plain text\nversion of the PicoLisp FAQ. The complete source, including the text\ngenerator, can be downloaded via the \"Sources\" link as \"ticker.zip\".\n\nNow look at the \"Next page\" link, appearing on the bottom right of the page.\nIt always points to a page with a number one greater than the current page,\nproviding an unlimited supply of ticker pages.\n\nI went ahead, and installed and started the server. To get some logging, I\ninserted the line\n\n    \n    \n    (out 2 (prinl (stamp) \" {\" *Url \"} Page \" *Page \" [\" *Adr \"] \" *Agent))\n\nat the beginning of the start function.\n\nOn June 18th I announced it on Twitter, and watched the log files.\nImmediately, within one or two seconds (!), Googlebot accessed it:\n\n    \n    \n    2011-06-18 11:22:04 Page 1 [66.249.71.139] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\n\nWow, I thought, that was fast! Don't know if this was just by chance, or if\nGoogle always has such a close watch on Twitter.\n\nAnyway, I was curious about what the search engine would do with such nonsense\ntext, and how it would handle the infinite number of pages. During the next\nseconds and minutes, other bots and possibly human users accessed the ticker:\n\n    \n    \n    2011-06-18 11:22:08 Page 1 [65.52.23.76] Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0) 2011-06-18 11:22:10 Page 1 [65.52.4.133] Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0) 2011-06-18 11:22:20 Page 1 [50.16.239.111] Mozilla/5.0 (compatible; Birubot/1.0) Gecko/2009032608 Firefox/3.0.8 2011-06-18 11:29:52 Page 1 [174.129.42.87] Python-urllib/2.6 2011-06-18 11:30:34 Page 1 [174.129.42.87] Python-urllib/2.6 2011-06-18 11:33:54 Page 1 [89.151.99.92] Mozilla/5.0 (compatible; MSIE 6.0b; Windows NT 5.0) Gecko/2009011913 Firefox/3.0.6 TweetmemeBot 2011-06-18 11:33:54 Page 1 [89.151.99.92] Mozilla/5.0 (compatible; MSIE 6.0b; Windows NT 5.0) Gecko/2009011913 Firefox/3.0.6 TweetmemeBot 2011-06-18 13:47:21 Page 1 [190.175.174.220] Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.17) Gecko/20110428 Fedora/3.6.17-1.fc14 Firefox/3.6.17 2011-06-18 13:49:13 Page 2 [190.175.174.220] Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.17) Gecko/20110428 Fedora/3.6.17-1.fc14 Firefox/3.6.17 2011-06-18 13:49:21 Page 3 [190.175.174.220] Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.17) Gecko/20110428 Fedora/3.6.17-1.fc14 Firefox/3.6.17 2011-06-18 19:43:36 Page 1 [24.167.162.218] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30 2011-06-18 19:43:54 Page 2 [24.167.162.218] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30 2011-06-18 19:44:11 Page 3 [24.167.162.218] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30 2011-06-18 19:44:13 Page 4 [24.167.162.218] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30 2011-06-18 19:44:16 Page 5 [24.167.162.218] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30 2011-06-18 19:44:18 Page 6 [24.167.162.218] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30 2011-06-18 19:44:20 Page 7 [24.167.162.218] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30\n\nMr. Google came back the following day:\n\n    \n    \n    2011-06-19 00:25:57 Page 2 [66.249.67.197] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-06-19 01:03:13 Page 3 [66.249.67.197] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-06-19 01:35:57 Page 4 [66.249.67.197] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-06-19 02:39:19 Page 5 [66.249.67.197] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-06-19 03:43:39 Page 6 [66.249.67.197] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-06-19 04:17:02 Page 7 [66.249.67.197] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\n\nIn between (not shown here) were also some accesses, probably by non-bots, who\nusually gave up after a few pages.\n\nMr. Google, however, assiduously went through \"all\" pages. The page numbers\nincreased sequentially, but he also re-visited page 1, going up again. Now\nthere were several indexing threads, and by June 23rd the first one exceeded\npage 150.\n\nI felt sorry for poor Googlebot, and installed a \"robots.txt\" the same day,\ndisallowing the ticker page for robots. I could see that several other bots\nfetched \"robots.txt\". But not Google. Instead, it kept following the pages of\nthe ticker.\n\nThen, finally, on July 5th, Googlebot looked at \"robots.txt\":\n\n    \n    \n    \"robots.txt\" 2011-07-05 07:03:05 Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) ticker.picolisp.com \"robots.txt: disallowed all\"\n\nThe indexing, however, went on. Excerpt:\n\n    \n    \n    2011-07-05 04:27:46 {!start} Page 500 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 04:58:50 {!start} Page 501 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 05:30:24 {!start} Page 502 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 06:02:10 {!start} Page 503 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 06:32:14 {!start} Page 504 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 07:02:41 {!start} Page 505 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 08:02:31 {!start} Page 506 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 08:45:52 {!start} Page 507 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 09:20:06 {!start} Page 508 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-05 09:51:49 {!start} Page 509 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\n\nStrange. I would have expected the indexing to stop after Page 505.\n\nIn fact, all other robots seem to obey \"robots.txt\". Mr. Google, however, even\nstarted a new thread five days later again:\n\n    \n    \n    2011-07-10 02:22:52 {!start} Page 1 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\n\nI should feel flattered, if the PicoLisp news ticker is so interesting!\n\nHow will that go on? As of today, we have reached\n\n    \n    \n    2011-07-15 09:42:36 {!start} Page 879 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\n\nI'll stay tuned ...\n\nNow ... 8 hours later (17:10):\n\nAs I wrote in the mailing list, I've extended \"robots.txt/default\" to exclude\nalso \"/21000/\" from \"picolisp.com\". This was 14:58, two hours ago. Meanwhile,\n\n    \n    \n    2011-07-15 15:29:59 {!start} Page 800 [74.125.94.84] Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.24 (KHTML, like Gecko; Google Web Preview) Chrome/11.0.696 Safari/534.24 2011-07-15 15:43:58 {!start} Page 889 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-15 16:13:54 {!start} Page 890 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 2011-07-15 16:27:24 {!start} Page 1 [66.249.71.203] Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\n\nwe still have accesses, and even a restart from page one (which I wouldn't\nhave expected now).\n\nAs I wrote, \"robots.txt/default\" now looks like this:\n\n    \n    \n    (prinl \"User-Agent: *\") (prinl \"Disallow:\" (cond ((= *Host '`(chop \"ticker.picolisp.com\")) \" /\") ((= *Host '`(chop \"picolisp.com\")) \" /21000/\") ) )\n\nLooking at the returned contents:\n\n    \n    \n    : (client \"ticker.picolisp.com\" 80 \"robots.txt\" (out NIL (echo))) User-Agent: * Disallow: /\n\nand\n\n    \n    \n    : (client \"picolisp.com\" 80 \"robots.txt\" (out NIL (echo))) User-Agent: * Disallow: /21000/\n\n... next morning\n\nGood! This helped. Googlebot seems to have stopped all traversals.\n\nThe log entry at 16:27 yesterday is the last one.\n\nIn summary, I can't blame Google. It was actually my fault not to explicitly\ndisallow /21000/, because for a bot the links looks like pointing to a\ndifferent site. Just disabling the \"root\" of the traversal is not enough;\nthere is no garbage collector involved.\n\nhttps://picolisp.com/wiki/?ticker\n\n29jul11| abu  \n---|---\n\n", "frontpage": false}
