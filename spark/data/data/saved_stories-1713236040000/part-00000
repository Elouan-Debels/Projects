{"aid": "40045396", "title": "Apple Did a Dry Run of APFS on Your Device Even Before iOS 10.3 (2017)", "url": "https://www.macobserver.com/analysis/apple-dry-run-apfs-prior-ios-10-3/", "domain": "macobserver.com", "votes": 6, "user": "tosh", "posted_at": "2024-04-15 20:51:15", "comments": 0, "source_title": "Apple Did a Dry Run of APFS on Your Device Even Before iOS 10.3", "source_text": "Apple Did a Dry Run of APFS on Your Device Even Before iOS 10.3- The Mac\nObserver\n\n# Apple Did a Dry Run of APFS on Your Device Even Before iOS 10.3\n\nJohn Martellaro\n\n1 minute read Jul 5th, 2017 5:35 PM EDT | Analysis\n\nApple rolled out APFS for good in iOS 10.3, but well before that the company\ndid a trial APFS migration and collected user analytics.\n\nApple\u2019s Craig Federighi explains APFS migration. Image credit: The Show\n\n## The Show\n\nWe found out about this test phase from Craig Federighi during The Show with\nJohn Gruber. That\u2019s a post-WWDC-keynote 90 minute interview, lately with Apple\nSVP Phil Schiler and SVP Craig Federighi as guests.\n\nAt 28m:20s into the show, Mr. Federighi is chatting about how unbelievable\nApple\u2019s file system team is. Describing the APFS dry run, he said:\n\n> We actually had this process running for earlier iOS updates ... where when\n> you updated to 10.1 or 10.2, we were trial migrating your whole file system\n> ... consistency checking it ... reporting back to us whether the upgrade was\n> 100 percent clean, then rolling it back.\n\nLater, we learned some of the technical details. Namely, in iOS 10.1 and 102,\nmetadata for APFS was test written and the superblock header was created but\nnot actually written out.\n\nThe file data remained untouched for safety and crash protection and the user\nremained in HFS+. This was the dry run conversion.\n\nThen, in iOS 10.3, the dry run was repeated, but, finally, HFS+ superblock\ndata was actually overwritten with the new APFS data.\n\nAt that point, the iOS 10.3 device was fully running APFS.\n\n## Collecting the Analytics\n\nYou may be wondering how your iOS device reported back the results of these\ntrial runs during the upgrade to iOS 10.1 and 10.2. There is a setting that\ncontrols whether your iPhone can report diagnostics and usage to Apple.\n\nIn iOS, it\u2019s in Settings > Privacy > Analytics. It looks like the screen shot\nbelow.\n\n(In macOS, you\u2019ll find it in System Preferences > Security & Privacy > Privacy\n> Analytics.)\n\nThe user can control diagnostics feedback to Apple & developers.\n\nThis is a powerful technique, one that allowed Apple to confidently migrate\nhundreds of millions of iOS users to a new file system seamlessly and with no\nreported loss of user data.\n\nAs Mr. Federighi said during The Show:\n\n> Our file system team is unbelievable. What they pulled off in a couple of\n> years ... um, I think ... any comparable benchmark of the past has probably\n> taken a decade.\n\nAnd now, with all this vast experience with iOS, Apple is preparing to take\nmost of its Mac users to APFS as well when macOS High Sierra is released this\nfall. My own experience also suggests that it will go equally smoothly.\n\nAPFS WWDC\n\n## One thought on \u201cApple Did a Dry Run of APFS on Your Device Even Before iOS\n10.3\u201d\n\n  * geoduck says:\n\nJuly 5, 2017 at 6:09 EDT PM\n\nWow that\u2019s amazing. I\u2019m looking forward to the OS updates this fall, mac and\ni. I suspect that 2017 will be one of those benchmark years when \u201ceverything\nchanged\u201d.\n\nLog in to Reply\n\n### Leave a Reply Cancel reply\n\nYou must be logged in to post a comment.\n\nThis site uses Akismet to reduce spam. Learn how your comment data is\nprocessed.\n\n  * 20725\n  * John Martellaro\n  * analysis\n  * 1\n  * 1499276126\n\n#### Navigation\n\n#### Categories\n\n  * Columns\n  * Editorials\n  * Quick Tips\n  * Apple Death Knells\n  * View All Categories\n\n#### Connect with Us\n\n  * Twitter\n  * Facebook\n  * RSS Feed\n  * Podcast Directory\n  * Privacy Policy\n\nNotifications\n\nThe Mac Observer Data and Cookie Consent\n\nIn order to provide a more personal user experience, we and our 219 partners\nuse technology such as cookies to store and/or access device information.\n\nBy clicking \u201cAccept\u201d you consent to these technologies which will allow us and\n\nour partners\n\nto process non-sensitive data such as IP address, unique ID, and browsing data\nfor the purposes of serving personalized ads and content, measuring ads and\ncontent, gaining audience insights, gathering analytics on website activity,\nand developing and improving products.\n\nYour choices on this site will be applied only for this site. You can change\nyour settings at any time, including withdrawing your consent, by going to the\n\nPrivacy Policy\n\npage of this site.\n\nManage Settings\n\nAccept\n\nUpdate Privacy Settings\n\n", "frontpage": true}
