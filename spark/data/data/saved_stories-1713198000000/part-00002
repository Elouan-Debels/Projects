{"aid": "40038611", "title": "Distributed Grok-1 (314B)", "url": "https://github.com/b4rtaz/distributed-llama/pull/18", "domain": "github.com/b4rtaz", "votes": 1, "user": "b4rtazz", "posted_at": "2024-04-15 10:18:36", "comments": 0, "source_title": "grok-1 support. by b4rtaz \u00b7 Pull Request #18 \u00b7 b4rtaz/distributed-llama", "source_text": "grok-1 support. by b4rtaz \u00b7 Pull Request #18 \u00b7 b4rtaz/distributed-llama \u00b7\nGitHub\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nb4rtaz / distributed-llama Public\n\n  * Notifications\n  * Fork 46\n  * Star 687\n\nJump to bottom\n\n# grok-1 support. #18\n\nMerged\n\nb4rtaz merged 24 commits into main from grok-1 Apr 11, 2024\n\nMerged\n\n# grok-1 support. #18\n\nb4rtaz merged 24 commits into main from grok-1 Apr 11, 2024\n\n+1,829 \u22121,087\n\n## Conversation\n\nOwner\n\n###\n\nb4rtaz commented Apr 4, 2024 \u2022\n\nThis branch contains experimental adjusments to support Grok-1. By these\nadjusment this version doesn't support Llama 2 model anymore, so to merge this\nPR I need to make more changes to support both models at the same time.\n\n### How to run Grok-1?\n\n  1. Clone this repository (grok-1 branch). git clone https://github.com/b4rtaz/distributed-llama.git\n  2. Build Distributed Llama: make main\n  3. Download quantized (Q40) weights from https://huggingface.co/b4rtaz/grok-1-dllama (180GB).\n  4. Merge split models files: cat dllama-grok-1-q40.binaa dllama-grok-1-q40.binab dllama-grok-1-q40.binac dllama-grok-1-q40.binad dllama-grok-1-q40.binae dllama-grok-1-q40.binaf dllama-grok-1-q40.binag dllama-grok-1-q40.binah dllama-grok-1-q40.binai > dllama-grok-1-q40-final.bin\n  5. Run workers: ./main worker --port 9999 --nthreads 8\n  6. Run root node: ./main inference --weights-float-type q40 --buffer-float-type q80 --prompt \"Hello world\" --steps 128 --nthreads 8 --tokenizer tokenizers/grok-1-tokenizer.t --model dllama-grok-1-q40-final.bin --workers 10.0.0.1:9999\n\n### Test\n\nI successfully started the inference of Grok-1 on 4 x 16 vCPU, 64 GB RAM (4 x\nGoogle Cloud n2d-standard-16). Achieved 1.8 tokens/second. \ud83c\udf89\n\nb4rtaz added 17 commits March 26, 2024 22:56\n\ngrok-1: init.\n\nd872fc3\n\nrefactor.\n\nf30b0da\n\nsplit tasks.\n\n3afc4a6\n\nnext split.\n\n989564c\n\nq40 support.\n\n0272434\n\nfix converter.\n\na226a99\n\nfix gc.\n\n23d1cbd\n\ntrace.\n\nac5fae0\n\nchange order.\n\n1382479\n\nlayerMap.\n\nda6f697\n\nfix.\n\n94decf2\n\nchange order.\n\ne914a22\n\nfixed dead lock.\n\n6df04dc\n\nfix converter.\n\n9e45670\n\nbos eos.\n\nf29f815\n\nrope, fix flow.\n\n117d3b3\n\nfixes.\n\nc0e4e64\n\nOwner Author\n\n###\n\nb4rtaz commented Apr 5, 2024\n\n### Test\n\n2 x c3d-highcpu-90 (90 vCPU, 45 core, 177 GB memory). During the test was used\nonly 2 x 64 cores due to Distributed Llama limitations. Achieved 4.3 tokens /\nsecond. \ud83c\udf89  \n---  \n  \nb4rtaz mentioned this pull request Apr 7, 2024\n\nHi, do you know why the synchronization time from 4pi to 8pi suddenly\nincreases? #20\n\nOpen\n\nb4rtaz added 7 commits April 10, 2024 21:38\n\nrefactor.\n\n7ab589e\n\nrefactor.\n\nf4e114d\n\nmissing include.\n\nc70ec11\n\nfix.\n\n72b4023\n\ndev low memory mode.\n\nfa61f21\n\nimprove start info.\n\n952a7a2\n\nreadme.md.\n\n4ca07da\n\nb4rtaz marked this pull request as ready for review April 11, 2024 21:27\n\nb4rtaz merged commit 620644a into main Apr 11, 2024\n\n1 check passed\n\nSign up for free to join this conversation on GitHub. Already have an account?\nSign in to comment\n\nLabels\n\nNone yet\n\n1 participant\n\nAdd this suggestion to a batch that can be applied as a single commit. This\nsuggestion is invalid because no changes were made to the code. Suggestions\ncannot be applied while the pull request is closed. Suggestions cannot be\napplied while viewing a subset of changes. Only one suggestion per line can be\napplied in a batch. Add this suggestion to a batch that can be applied as a\nsingle commit. Applying suggestions on deleted lines is not supported. You\nmust change the existing code in this line in order to create a valid\nsuggestion. Outdated suggestions cannot be applied. This suggestion has been\napplied or marked resolved. Suggestions cannot be applied from pending\nreviews. Suggestions cannot be applied on multi-line comments. Suggestions\ncannot be applied while the pull request is queued to merge. Suggestion cannot\nbe applied right now. Please check back later.\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
