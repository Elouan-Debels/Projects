{"aid": "39984768", "title": "Pretty Eight Machine", "url": "https://www.leadedsolder.com/2024/04/09/fujitsu-fm8-pickup-cpu-repair.html", "domain": "leadedsolder.com", "votes": 2, "user": "zdw", "posted_at": "2024-04-09 22:00:38", "comments": 0, "source_title": "Pretty Eight Machine", "source_text": "Pretty Eight Machine | Leaded Solder\n\nLeaded Solder\n\n# Pretty Eight Machine\n\n#### Tags: computer fujitsu fm8 pickups repair\n\nI got a really good deal on a Fujitsu FM-8, the big, brown predecessor of the\nFM-7. Of course, it\u2019s missing a few parts. Follow along with me as I get\nacquainted with an earlier version of Fujitsu\u2019s dual-processor wonder\ncomputer.\n\n## FM-8 History\n\nOfficially the Fujitsu Micro 8, the FM-8 was one of Fujitsu\u2019s earliest PCs,\nreleased in early 1981. Fujitsu made revisions while also taking a lot of\nfeatures off this machine in order to make the cheaper FM-7 the next year, but\nthe FM-8 had a large following of hobbyists that made the machine special.\n\nNot big enough? Fujitsu also offered the FM-11 as a better-specced successor\nto the FM-8 for professional use. Don\u2019t expect to see one of those on this\nblog anytime soon.\n\nLike the FM-7, the FM-8 system runs dual 6809 CPUs, with one normally\ndedicated to graphics. You could also upgrade the system with an MB22404 8088\nboard, or an MB22401 Z80 board, if you wanted to run alternative operating\nsystems like CP/M-86 or CP/M-80 respectively. Flexible!\n\nAs a bit of pop culture history, it seems also that the classic Japanese\npuzzle game SameGame originated on this system (alongside a type-in FM-7\nversion.)\n\n## This FM-8 is History\n\nHere is the FM-8 as it was photographed at auction. It looks a little grungy,\nbut it\u2019s not that bad overall.\n\nWhy was it so cheap? This is why:\n\nThe CPU is missing! Not both of them, just one of them \u2013 the main MBL68A09!\n\n## It Wasn\u2019t A COMPACkage Deal\n\nWhy isn\u2019t there a CPU? One obvious reason is that it\u2019s been parted out. Blog\nfriend Frio found that the same seller (yugen2plus) also, coincidentally, had\na Fujitsu FM-8 CPU accelerator board (\u201cHERO-09 (by) COMPAC\u201d) listed shortly\nafter it. This board slots into the CPU socket using an IDC DIP connector.\n\nThe ad fesses up to the brain surgery:\n\n> Removed from FM-8 being exhibited at the same time.\n\nWanting to reunite them, I bid on that board, but didn\u2019t win it, as it went\nfor \u00a59000, way more than the \u00a52900 of the FM-8 chassis itself. Let\u2019s take a\nlook at the auction photo of that accelerator board:\n\nThe presence of a separate clock crystal and some flip-flops seems to indicate\nto me that the CPU is being run at a much higher clock rate than before.\nIndeed, the ad describes it as a \u201cdouble-speed\u201d board. All of this support\ncircuitry must either synchronize it with the slower system bus, or add wait\nstates; it\u2019s a little bit above my pay grade at the moment.\n\nIn my research, I found that the October 1982 issue of I/O magazine published\nan article describing how to build the HERO-09 accelerator board at home,\nwritten by TAKAYA Kasasaku^1. This seems to be a pseudo-commercial version of\nthat board, made by COMPAC. Judging from the solder joints, it was probably\nmade in low quantities and by hand. There are lots of other speed-up boards\nfor the FM-8 out there, as well as fancy video boards and other hobbyist\nshenanigans. It\u2019s great that websites like this listing of accelerators still\nexist, and offer a glimpse into the history of a relatively niche computer.\nEven Artdink \u2013 my Artdink?! \u2013 made a bank-switching board to expand the\nmemory.\n\nSpeed-ups were popular: this machine\u2019s performance, as we\u2019ll find out later,\nis absolutely glacial. Blog superfriend Nicole even set up her proprietary\nnyaTM BASIC benchmark that shows a stock FM-8 is even slower than a Sega\nSC-3000 at printing large quantities of scrolling text.\n\nFascinating \u2013 and I think this deserves a journey into making a modern, open-\nsource replica of the HERO-09. However, it would be silly to spend a lot of\ntime making a clock-doubler board for a computer, if the computer doesn\u2019t even\nwork.\n\n## Brain Transplant\n\nIn order to test the machine, I reached into my drawer of CPUs and pulled out\na 63C09EP. This CPU is a Hitachi-made hot rod, essentially identical to a 6809\nuntil its secret alternative mode is activated. That mode is so secret that\nHitachi\u2019s engineers didn\u2019t bother mentioning it until a few years later, when\nthe info was published in magazine Oh!FM in 1988, and later distilled to an\nEnglish-speaking audience by Hiroshima University\u2019s Hirotsugu Kakuga on the\ncomp.sys.m6809 Usenet group in 1992.\n\nWhat kind of features does this secret mode unlock? Extra registers. Of\ncourse, there\u2019s lots of other bonuses, too, such as fewer cycles per\ninstruction, block transfer instructions, and hardware multiplication, but\n\u201cfinding some secret extra registers\u201d is pretty far up the list of good things\nin the world. They also seem to be able to tolerate a much faster clock than\nthe 6809, which is why they\u2019re a popular upgrade for the Tandy CoCo3.\n\nHowever, I wasn\u2019t not planning on doing any of those fancy upgrades, either.\nAll I want is the regular old 6809 mode, at the original 1.2MHz. Turns out\nthat was going to be harder to get than I thought!\n\n## Open It! Open It!\n\nSoon, the FM-8 arrived, and it was unexpectedly grungy. I gave it a quick wipe\non the case with a Lysol wipe, and that took care of a decent portion of the\ngunk. I assume that this is all storage gunk, as the inside of the FM-8 looked\ntoo clean to have been used in an industrial setting.\n\nI haven\u2019t been able to find a decoder for this \u201ctype\u201d designation, so I\u2019m not\nsure what this computer came with from the factory. The serial number is\npretty funny; although this machine was popular, I sincerely doubt Fujitsu\nsold nearly 400 million of them.\n\nWhile cleaning, I noticed that there were letters \u201cA-F\u201d on stickers stuck onto\nsome of the number pad keys. I assume this was for some kind of hexadecimal\ninput, maybe an assembler or machine monitor. Between the HERO-09 and this, it\nsure seems like this computer got used for fun stuff.\n\nThe Fujitsu FM-8 is a massive computer. I sort of expected it to be about the\nsame size as my already-large FM-7, but it\u2019s at least another quarter as large\nin each dimension. Here\u2019s a Game Gear for size comparison:\n\nOkay, let\u2019s get it out of the way now and check out what\u2019s under the Game\nGear: that tantalizing smoked-plastic door.\n\nI do so love a compartment.\n\nAs you can see, the door on top of the machine has nothing under it. Normally,\nthis is where an expansion (such as the bubble memory) would go. Based on my\nlimited research, machines without an expansion had just an empty space-\nfilling cup here, often colloquially referred to as \u201cthe ashtray.\u201d The seller\nleft the screws that mount this ashtray behind, which was nice of them.\nThere\u2019s an IDC expansion header on the motherboard underneath, which I\u2019m sure\nwe can fill up with something good.\n\nThe ports are pretty straightforward, except the \u201canalog in\u201d connector is a\nlittle mysterious. Turns out that\u2019s for reading any analogue data source, such\nas Apple II-style joysticks. There is support in BASIC for quantizing them,\nand presumably some kind of simple internal ADC to read them somewhere in the\nmaze of passives around that port. That\u2019s a cool addition!\n\nOf particular note on the right side is that \u201cFG\u201d and \u201cSG\u201d are broken out\nseparately. This made me suspect that \u201cSG\u201d was for the shield ground of the\nRS-232 cable, which should not be connected to logic ground.\n\nDespite the fact that the computer had been opened recently, the screws were\nvery tight. I think they probably used a power tool to close it up again.\nThankfully, the computer has brass threaded inserts for the screws to go into\n\u2013 this thing must have cost a fortune, as the screw pillars are even\nreinforced! It must have been a huge job to injection mould the massive case,\nas there are multiple injection and ejection marks on the bottom pan.\n\nOnce the four screws holding the top on were removed, I had to remove the\nkeyboard cable so I could pull the top off. Keeping with the high-quality\nstandard, this is an IDC ribbon cable. It\u2019s a little bit short, which is\nannoying to manuever, but I\u2019ll take that any day over fragile membrane ribbons\nfrom the 80s. Top notch.\n\nWith the motherboard exposed, it\u2019s worth taking a moment to admire the vast\nquantity of ICs on this puppy.\n\nThere is an entire bank of sixteen 64kBit MB8364 ROMs here! And they\u2019re all\nsocketed!\n\nThere is also this intriguing pair of expansion headers near the ROMs. On the\nFM-7, this pair of connectors is used for a sound expansion. On the FM-8,\nalmost all internal expansions used these connectors, because this machine\nlacks the nice expansion card slots of the FM-7. Maybe a Z80 card could go\nhere, if one were to be invented? Hmm.\n\nThe CPU, or, to be more accurate, the CPU socket lies underneath the big black\npower supply. The speaker is bolted to the side of the power supply, and\npoints inward rather than outward. Maybe that\u2019s so they can minimize how loud\nit is? I looked around and found four screws holding the power supply to the\nbottom pan, but had to remove the main power switch first to get at two of\nthem.\n\nFor some reason, Fujitsu put the main power switch under the expansion door on\nthe top. You have to flip the lid to flip the switch, which makes some sense.\nHowever, as you can see, the switch plate blocks the screws that hold the\npower supply to the bottom pan, so I had to remove that first. Inside the\nswitch plate is a switch, a mount for a power LED, and a fuse holder, and it\npasses 100VAC to the rest of the board through a Molex-esque connector which\nwas incredibly seized, so I decided to leave it alone and just move the whole\nassembly aside.\n\nThe screws holding in the power supply were of mismatched lengths, which\ndoesn\u2019t bode well, but the threaded inserts were more than deep enough to\naccept the longest screw.\n\nAt last, the power supply was out of the way, and the CPU socket was exposed.\nI\u2019m a little confused why this is labeled \u201cSC2,\u201d and thought it might actually\nstand for \u201csub-CPU,\u201d but the other CPU was labeled \u201cSC10,\u201d so perhaps\nFujitsu\u2019s IC-numbering person took a day off on this one.\n\nI pulled out my sleeve of AliExpress-salvage 63C09EPs, and started preparing\none for insertion. The CPU socket has such a narrow opening that you have to\nget the pins really straight for a clean insertion. It took a few test fits\nand re-tries with the IC pin straightener until I got it, but finally the new\nheart of the machine was seated home.\n\nAfter reassembling, it was time to try it out. Right after I cleaned the desk\nenough to find a place to set it up. I decided to procrastinate on that task,\nwhich turned out to be fortuitous.\n\nYou see, I had just put the wrong CPU in!\n\n## A Lesson In Reading The Labels\n\nThe 6809 comes in two varieties: 6809, and 6809E. If you look very closely at\nthe picture up above, an HD63C09EP is being inserted into the socket, and if\nyou look closely at the HERO-09 picture, a non-E HD68B09P^2 is what was\noriginally being used. I had these 6809E-compatible chips on hand to do a\nTandy CoCo upgrade in the future.\n\nWhat does the \u201cE\u201d stand for? 6809Es require an External clock generator. Non-E\nparts generate their own clocks internally (using an external crystal, of\ncourse,) which is a pretty neat trick for 1978. Of course, this discrepancy\nmeans that the pinouts are not compatible, and these two parts are not\ninterchangeable besides both being 6809s.\n\nThe Fujitsu FM-77AV2 I\u2019d been struggling with at the time used an 6809E\nvariant for its main CPU, too, so I didn\u2019t even think to check if the FM-8\nalso did. Luckily, blog friend Curt noticed from the pictures that it was the\nwrong part. I opened the machine again and pulled out the HD63C09EP with a\nchip extractor.\n\n## Try, Try, Try Again\n\nI ordered a non-E HD63C09P from AliExpress, and waited patiently by the\nmailbox for it to arrive.\n\nWhat else should show up after several weeks but another 63C09EP?\n\nSo I went nuts. I ordered 6809Ps from two more sellers. One of them sent me a\npack of ten \u201c68B09Ps,\u201d which were actually:\n\n  * Three 68B09EPs;\n  * Two 6809Ps;\n  * One 68B03P (how\u2019d that get in here?);\n  * Four 68B09CPs!\n\nHooray! At last we have a non-E 6809 to put in this thing. I checked around\nbut I couldn\u2019t figure out what the \u201cC\u201d designator meant, other than perhaps\nhigher temperature for industrial use. I\u2019ll take it.\n\nThe chips looked very dinged up, but I prefer that to the fakey remasked ones\nthat many AliExpress sellers offer. It\u2019s especially annoying when they add\nsolder to the chip legs to shine them up, and end up making them harder to\nbend and more likely to snap.\n\nI squeezed the legs of an MC68C09CP in my chip leg straightener so it would be\neasier to insert, and then I dropped it into the socket. The only drama\ninvolved was having to back the screws off on the power supply, so that I\ncould wiggle it around to get a better angle on the mounting posts.\n\nI\u2019ll have to find something to use all these other CPUs for.\n\n## Hello Major FM-8, Are You Receiving?\n\nI\u2019ve been told that the FM-8 video pinout is identical to that of the FM-7,\nwhich means it\u2019s identical to that of the PC-8801mkII^3. And that\u2019s really\ngood news for me, because I have made a PC-8801mkII video adapter before.\n\nI powered the computer up. The ceremony of flipping up the expansion-ashtray\ndoor to hit the main power switch is kind of fun.\n\nSync! Video! Unfortunately, the video was just a blinking insertion cursor in\nthe top left. It was followed by a shrill beeeeeeeeeeep from the speaker.\nSomething wasn\u2019t right.\n\nI suspected this row of dip-switches on the back, labelled \u201cBAUD\nRATE/BOOTSTRAP.\u201d Out of laziness, I decided to flip switch number 10 back down\nto match the others. This made the beep go away, but there still wasn\u2019t\nanything happening on screen.\n\nAfter annoying everyone I knew who knew things about FM-8s, I eventually did a\nsearch and found blog friend Sean\u2019s post about his FM-8. He was gracious\nenough to have taken a picture of the back of his computer, where switches 9\nand 10 were flipped up. So I did the same.\n\nNow, after some hesitation, Fujitsu BASIC was launched and a program was\nentered. This is a very nice keyboard, possibly because it\u2019s built like a\nbrick shithouse, just like the rest of the computer.\n\nIf I had been a little more patient, I would have been able to look up blog\nfriend Curt J. Sampson\u2019s knowledge base about the Fujitsu FM-8, which would\nhave told me to put up switches 9 and 10:\n\nSwitch 9| Switch 10| Does what?  \n---|---|---  \nUP| UP| F-BASIC ROM/disk mode  \nUP| down| Bubble memory  \ndown| UP| DOS  \ndown| down| Reserved/unused (or 8\u201d DOS?)  \n  \n## Take the ROMs to the PROM\n\nSomething was still bothering me. Maybe you noticed it in one of the previous\npictures. The ROM closest to the CPU isn\u2019t a mask ROM, like the other ones on\nthe motherboard. No, it\u2019s a UV EPROM. If there were other modifications done\nto the system, then maybe the person who had it before put something cool in\nROM! So... what\u2019s on that ROM?\n\nI did a little bit of poking around and found two plastic-package EPROMs:\nSM11-14, and SN11-11. According to Retro PC Gallery, these are the stock\nFujitsu 5.25\u201d floppy BIOS and the font ROM, respectively. I also found a\nceramic package chip with a sticker, which I\u2019m also assuming is an EPROM,\nmarked SL11-11, and what appears to be some kind of small PLD or bipolar PROM,\nSK11-11. I wasn\u2019t able to find any documentation on these parts, but I\u2019m\nassuming they are all stock.\n\nSo, no new cool software, but it\u2019s fun to look at how many ROMs this\nconsiderably expensive machine held. If I am understanding other sources\ncorrectly, then there is some kind of ROM-resident Forth out there that I\nwould like to try and get running on this machine in the future.\n\nIn the meantime, this FM-8 is running, and it\u2019s ready for all kinds of other\nshenanigans. I have a couple things I would like to explore:\n\n  * The software catalogue, including the few games made available for it;\n  * Disk drive interfaces, maybe even an emulated one;\n  * Implementing the HERO-09 clone. I\u2019m pretty sure we can build one for less than \u00a59000 plus shipping, even if we do need to buy an IDC DIP connector.\n\n## Repair Summary\n\nFault| Remedy| Caveats  \n---|---|---  \nCPU is missing.| Put the correct 68B09P CPU in.| Do not put in an \u201cE\u201d CPU.  \nDoes not boot after CPU replacement.| Change bootstrap DIPs 9 and 10 from\n\u201cDOS\u201d to F-BASIC ROM (UP/UP)  \n  \n  1. There appears to be an article later, in the June 1983 edition, where they discuss fixes for floppy drive compatibility when using the HERO-09. The HERO-09 introductory article is reprinted in the FM-7/FM-8 Application Note mook, as well. \u21a9\n\n  2. The \u201cB\u201d indicates a higher clock speed than the standard issue. According to the Hitachi HD63B09 datasheet, the \u201cB\u201d part is good to 8MHz, unlike the \u201cA\u201d part which is 6MHz, and the unmarked part which is 4MHz. \u21a9\n\n  3. Tons of Japanese computers use this pinout for TTL-level RGB, making it almost a de facto standard in my book. This might be the most useful piece of hardware I\u2019ve ever made. \u21a9\n\n## Leaded Solder\n\n  * Leaded Solder\n\n  * leaded-solder\n  * LeadedSolder\n  * leadedsolder\n  * LeadedSolder\n  * Support with Patreon or Ko-Fi\n  * Subscribe with RSS\n\nOld computer repair, history and programming.\n\n", "frontpage": false}
