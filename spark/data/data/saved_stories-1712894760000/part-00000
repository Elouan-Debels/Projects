{"aid": "40007299", "title": "Reproducible Builds in March 2024", "url": "https://reproducible-builds.org/reports/2024-03/", "domain": "reproducible-builds.org", "votes": 1, "user": "JNRowe", "posted_at": "2024-04-11 22:03:44", "comments": 0, "source_title": "Reproducible Builds in March 2024 \u2014 reproducible-builds.org", "source_text": "Reproducible Builds in March 2024 \u2014 reproducible-builds.org\n\n  * Home\n  * News\n  * Documentation\n  * Tools\n  * Who is involved?\n  * Talks\n  * Events\n  * Continuous tests\n  * Contribute\n\nAll sponsors\n\n# Reproducible Builds in March 2024\n\n\u2190 View all our monthly reports\n\nWelcome to the March 2024 report from the Reproducible Builds project! In our\nreports, we attempt to outline what we have been up to over the past month, as\nwell as mentioning some of the important things happening more generally in\nsoftware supply-chain security. As ever, if you are interested in contributing\nto the project, please visit our Contribute page on our website.\n\n### Arch Linux minimal container userland now 100% reproducible\n\nIn remarkable news, Reproducible builds developer kpcyrd reported that that\nthe Arch Linux \u201cminimal container userland\u201d is now 100% reproducible after\nwork by developers dvzv and Foxboron on the one remaining package. This\nrepresents a \u201creal world\u201d, widely-used Linux distribution being reproducible.\n\nTheir post, which kpcyrd suffixed with the question \u201cnow what?\u201d, continues on\nto outline some potential next steps, including validating whether the\ncontainer image itself could be reproduced bit-for-bit. The post, which was\nitself a followup for an Arch Linux update earlier in the month, generated a\nsignificant number of replies.\n\n### Validating Debian\u2019s build infrastructure after the XZ backdoor\n\nFrom our mailing list this month, Vagrant Cascadian wrote about being asked\nabout trying to perform concrete reproducibility checks for recent Debian\nsecurity updates, in an attempt to gain some confidence about Debian\u2019s build\ninfrastructure given that they performed builds in environments running the\nhigh-profile XZ vulnerability.\n\nVagrant reports (with some caveats):\n\n> So far, I have not found any reproducibility issues; everything I tested I\n> was able to get to build bit-for-bit identical with what is in the Debian\n> archive.\n\nThat is to say, reproducibility testing permitted Vagrant and Debian to claim\nwith some confidence that builds performed when this vulnerable version of XZ\nwas installed were not interfered with.\n\n### Making Fedora Linux (more) reproducible\n\nIn March, Davide Cavalca gave a talk at the 2024 Southern California Linux\nExpo (aka SCALE 21x) about the ongoing effort to make the Fedora Linux\ndistribution reproducible.\n\nDocumented in more detail on Fedora\u2019s website, the talk touched on topics such\nas the specifics of implementing reproducible builds in Fedora, the challenges\nencountered, the current status and what\u2019s coming next. (YouTube video)\n\n### \u201cIncreasing Trust in the Open Source Supply Chain with Reproducible Builds\nand Functional Package Management\u201d\n\nJulien Malka published a brief but interesting paper in the HAL open archive\non Increasing Trust in the Open Source Supply Chain with Reproducible Builds\nand Functional Package Management:\n\n> Functional package managers (FPMs) and reproducible builds (R-B) are\n> technologies and methodologies that are conceptually very different from the\n> traditional software deployment model, and that have promising properties\n> for software supply chain security. This thesis aims to evaluate the impact\n> of FPMs and R-B on the security of the software supply chain and propose\n> improvements to the FPM model to further improve trust in the open source\n> supply chain. PDF\n\nJulien\u2019s paper poses a number of research questions on how the model of\ndistributions such as GNU Guix and NixOS can \u201cbe leveraged to further improve\nthe safety of the software supply chain\u201d, etc.\n\n### Software and source code identification with GNU Guix and reproducible\nbuilds\n\nIn a long line of commendably detailed blog posts, Ludovic Court\u00e8s, Maxim\nCournoyer, Jan Nieuwenhuizen and Simon Tournier have together published two\ninteresting posts on the GNU Guix blog this month. In early March, Ludovic\nCourt\u00e8s, Maxim Cournoyer, Jan Nieuwenhuizen and Simon Tournier wrote about\nsoftware and source code identification and how that might be performed using\nGuix, rhetorically posing the questions: \u201cWhat does it take to \u2018identify\nsoftware\u2019? How can we tell what software is running on a machine to determine,\nfor example, what security vulnerabilities might affect it?\u201d\n\nLater in the month, Ludovic Court\u00e8s wrote a solo post describing adventures on\nthe quest for long-term reproducible deployment. Ludovic\u2019s post touches on GNU\nGuix\u2019s aim to support \u201ctime travel\u201d, the ability to reliably (and\nreproducibly) revert to an earlier point in time, employing the iconic image\nof Harold Lloyd hanging off the clock in Safety Last! (1925) to poetically\nillustrate both the slapstick nature of current modern technology and the\ngymnastics required to navigate hazards of our own making.\n\n### Two new Rust-based tools for post-processing determinism\n\nZbigniew J\u0119drzejewski-Szmek announced add-determinism, a work-in-progress\nreimplementation of the Reproducible Builds project\u2019s own strip-nondeterminism\ntool in the Rust programming language, intended to be used as a post-processor\nin RPM-based distributions such as Fedora\n\nIn addition, Yossi Kreinin published a blog post titled \u201crefix: fast,\ndebuggable, reproducible builds\u201d that describes a tool that post-processes\nbinaries in such a way that they are still debuggable with gdb, etc.. Yossi\npost details the motivation and techniques behind the (fast) performance of\nthe tool.\n\n### Distribution work\n\nIn Debian this month, since the testing framework no longer varies the build\npath, James Addison performed a bulk downgrade of the bug severity for issues\nfiled with a level of normal to a new level of wishlist. In addition, 28\nreviews of Debian packages were added, 38 were updated and 23 were removed\nthis month adding to ever-growing knowledge about identified issues. As part\nof this effort, a number of issue types were updated, including Chris Lamb\nadding a new ocaml_include_directories toolchain issue [...] and James Addison\nadding a new filesystem_order_in_java_jar_manifest_mf_include_resource issue\n[...] and updating the random_uuid_in_notebooks_generated_by_nbsphinx to\nreference a relevant discussion thread [...].\n\nIn addition, Roland Clobus posted his 24th status update of reproducible\nDebian ISO images. Roland highlights that the images for Debian unstable often\ncannot be generated due to changes in that distribution related to the 64-bit\ntime_t transition.\n\nLastly, Bernhard M. Wiedemann posted another monthly update for his\nreproducibility work in openSUSE.\n\n### Mailing list highlights\n\nElsewhere on our mailing list this month:\n\n  * Alexander Railean of Siemens asked the list to aid in understanding how one can independently verify the reproducibility of Java projects from the Maven Central repository. Having explored those repositories, Alexander could not find examples where the buildinfo file was present. Arnout Engelen responded with some details.\n\n  * Fay Stegerman resuscitated a long-dormant thread to report that she added support in her diff-zip-meta.py tool to expose extra timestamps embedded in .zip and .apk metadata.\n\n### Website updates\n\nThere were made a number of improvements to our website this month, including:\n\n  * Pol Dellaiera noticed the frequent need to correctly cite the website itself in academic work. To facilitate easier citation across multiple formats, Pol contributed a Citation File Format (CIF) file. As a result, an export in BibTeX format is now available in the Academic Publications section. Pol encourages community contributions to further refine the CITATION.cff file. Pol also added an substantial new section to the \u201cbuy in\u201d page documenting the role of Software Bill of Materials (SBOMs) and ephemeral development environments. [...][...]\n\n  * Bernhard M. Wiedemann added a new \u201ccommandments\u201d page to the documentation [...][...] and fixed some incorrect YAML elsewhere on the site [...].\n\n  * Chris Lamb add three recent academic papers to the publications page of the website. [...]\n\n  * Mattia Rizzolo and Holger Levsen collaborated to add Infomaniak as a sponsor of amd64 virtual machines. [...][...][...]\n\n  * Roland Clobus updated the \u201cstable outputs\u201d page, dropping version numbers from Python documentation pages [...] and noting that Python\u2019s set data structure is also affected by the PYTHONHASHSEED functionality. [...]\n\n### Delta chat clients now reproducible\n\nDelta Chat, an open source messaging application that can work over email,\nannounced this month that the Rust-based core library underlying Delta chat\napplication is now reproducible.\n\n### diffoscope\n\ndiffoscope is our in-depth and content-aware diff utility that can locate and\ndiagnose reproducibility issues. This month, Chris Lamb made a number of\nchanges such as uploading versions 259, 260 and 261 to Debian and made the\nfollowing additional changes:\n\n  * New features:\n\n    * Add support for the zipdetails tool from the Perl distribution. Thanks to Fay Stegerman and Larry Doolittle et al. for the pointer and thread about this tool. [...]\n  * Bug fixes:\n\n    * Don\u2019t identify Redis database dumps as GNU R database files based simply on their filename. [...]\n    * Add a missing call to File.recognizes so we actually perform the filename check for GNU R data files. [...]\n    * Don\u2019t crash if we encounter an .rdb file without an equivalent .rdx file. (#1066991)\n    * Correctly check for 7z being available\u2014and not lz4\u2014when testing 7z. [...]\n    * Prevent a traceback when comparing a contentful .pyc file with an empty one. [...]\n  * Testsuite improvements:\n\n    * Fix .epub tests after supporting the new zipdetails tool. [...]\n    * Don\u2019t use parenthesis within test \u201cskipping...\u201d messages, as PyTest adds its own parenthesis. [...]\n    * Factor out Python version checking in test_zip.py. [...]\n    * Skip some Zip-related tests under Python 3.10.14, as a potential regression may have been backported to the 3.10.x series. [...]\n    * Actually test 7z support in the test_7z set of tests, not the lz4 functionality. (Closes: reproducible-builds/diffoscope#359). [...]\n\nIn addition, Fay Stegerman updated diffoscope\u2019s monkey patch for supporting\nthe unusual Mozilla ZIP file format after Python\u2019s zipfile module changed to\ndetect potentially insecure overlapping entries within .zip files. (#362)\n\nChris Lamb also updated the trydiffoscope command line client, dropping a\nbuild-dependency on the deprecated python3-distutils package to fix Debian bug\n#1065988 [...], taking a moment to also refresh the packaging to the latest\nDebian standards [...]. Finally, Vagrant Cascadian submitted an update for\ndiffoscope version 260 in GNU Guix. [...]\n\n### Upstream patches\n\nThis month, we wrote a large number of patches, including:\n\n  * Bernhard M. Wiedemann:\n\n    * helm (SSL-related build failure)\n    * java-21-openjdk (parallelism)\n    * libressl (SSL-related build failure)\n    * nfdump (date issue)\n    * python-django-q (avoid stuck build)\n    * python-smart-open (fails to build on single-CPU machines)\n    * python-stdnum (fails to build in 2039)\n    * python-yarl (regression)\n    * qemu (build failure)\n    * rabbitmq-java-client (with Fridrich Strba; Maven timestamp issue)\n    * rmw (build fails in 2038)\n    * warewulf (with Egbert Eich; cpio modification time and inode issue)\n    * wxWidgets (fails to build in 2038)\n  * Chris Lamb:\n\n    * #1066042 filed against python-quantities.\n    * #1066083 filed against gnome-maps.\n    * #1066084 filed against tox.\n    * #1066085 filed against q2cli.\n    * #1067098 filed against mpl-sphinx-theme.\n    * #1067099 filed against woof-doom.\n    * #1067100 filed against bochs.\n    * #1067101 filed against storm-lang.\n    * #1067102 filed against librsvg.\n    * #1067218 filed against gretl.\n    * #1067483 filed against postfix.\n    * #1067484 filed against node-function-bind.\n    * #1067485 filed against python-pysaml2.\n    * #1067947 filed against golang-github-stvp-tempredis.\n  * James Addison:\n\n    * #1065124 filed against matplotlib.\n    * #1066014 filed against pathos.\n    * #1066016 filed against rdflib.\n    * #1066017 filed against xonsh.\n    * #1066045 filed against maven-bundle-plugin. (This patch was then uploaded by Mattia Rizzollo.)\n  * Ji\u0159\u00ed Techet:\n\n    * geany (toolchain-related issue for glfw)\n\nBernhard M. Wiedemann used reproducibility-tooling to detect and fix packages\nthat added changes in their %check section, thus failing when built with the\n--no-checks option. Only half of all openSUSE packages were tested so far, but\na large number of bugs were filed, including ones against caddy, exiv2, gnome-\ndisk-utility, grisbi, gsl, itinerary, kosmindoormap, libQuotient, med-tools,\nplasma6-disks, pspp, python-pypuppetdb, python-urlextract, rsync, vagrant-\nlibvirt and xsimd.\n\nSimilarly, Jean-Pierre De Jesus DIAZ employed reproducible builds techniques\nin order to test a proposed refactor of the ath9k-htc-firmware package. As the\nchange produced bit-for-bit identical binaries to the previously shipped pre-\nbuilt binaries:\n\n> I don\u2019t have the hardware to test this firmware, but the build produces the\n> same hashes for the firmware so it\u2019s safe to say that the firmware should\n> keep working.\n\n### Reproducibility testing framework\n\nThe Reproducible Builds project operates a comprehensive testing framework\nrunning primarily at tests.reproducible-builds.org in order to check packages\nand other artifacts for reproducibility.\n\nIn March, an enormous number of changes were made by Holger Levsen:\n\n  * Debian-related changes:\n\n    * Sleep less after a so-called \u201c404\u201d package state has occurred. [...]\n    * Schedule package builds more often. [...][...]\n    * Regenerate all our HTML indexes every hour, but only every 12h for the released suites. [...]\n    * Create and update unstable and experimental base systems on armhf again. [...][...]\n    * Don\u2019t reschedule so many \u201cdepwait\u201d packages due to the current size of the i386 architecture queue. [...]\n    * Redefine our scheduling thresholds and amounts. [...]\n    * Schedule untested packages with a higher priority, otherwise slow architectures cannot keep up with the experimental distribution growing. [...]\n    * Only create the stats_buildinfo.png graph once per day. [...][...]\n    * Reproducible Debian dashboard: refactoring, update several more static stats only every 12h. [...]\n    * Document how to use systemctl with new systemd-based services. [...]\n    * Temporarily disable armhf and i386 continuous integration tests in order to get some stability back. [...]\n    * Use the deb.debian.org CDN everywhere. [...]\n    * Remove the rsyslog logging facility on bookworm systems. [...]\n    * Add zst to the list of packages which are false-positive diskspace issues. [...]\n    * Detect failures to bootstrap Debian base systems. [...]\n  * Arch Linux-related changes:\n\n    * Temporarily disable builds because the pacman package manager is broken. [...][...]\n    * Split reproducible_html_live_status and split the scheduling timing . [...][...][...]\n    * Improve handling when database is locked. [...][...]\n  * Misc changes:\n\n    * Show failed services that require manual cleanup. [...][...]\n    * Integrate two new Infomaniak nodes. [...][...][...][...]\n    * Improve IRC notifications for artifacts. [...]\n    * Run diffoscope in different systemd slices. [...]\n    * Run the node health check more often, as it can now repair some issues. [...][...]\n    * Also include the string Bot in the userAgent for Git. (Re: #929013). [...]\n    * Document increased tmpfs size on our OUSL nodes. [...]\n    * Disable memory account for the reproducible_build service. [...][...]\n    * Allow 10 times as many open files for the Jenkins service. [...]\n    * Set OOMPolicy=continue and OOMScoreAdjust=-1000 for both the Jenkins and the reproducible_build service. [...]\n\nMattia Rizzolo also made the following changes:\n\n  * Debian-related changes:\n\n    * Define a systemd slice to group all relevant services. [...][...]\n    * Add a bunch of quotes in scripts to assuage the shellcheck tool. [...]\n    * Add stats on how many packages have been built today so far. [...]\n    * Instruct systemd-run to handle diffoscope\u2019s exit codes specially. [...]\n    * Prefer the pgrep tool over grepping the output of ps. [...]\n    * Re-enable a couple of i386 and armhf architecture builders. [...][...]\n    * Fix some stylistic issues flagged by the Python flake8 tool. [...]\n    * Cease scheduling Debian unstable and experimental on the armhf architecture due to the time_t transition. [...]\n    * Start a few more i386 & armhf workers. [...][...][...]\n    * Temporarly skip pbuilder updates in the unstable distribution, but only on the armhf architecture. [...]\n  * Other changes:\n\n    * Perform some large-scale refactoring on how the systemd service operates. [...][...]\n    * Move the list of workers into a separate file so it\u2019s accessible to a number of scripts. [...]\n    * Refactor the powercycle_x86_nodes.py script to use the new IONOS API and its new Python bindings. [...]\n    * Also fix nph-logwatch after the worker changes. [...]\n    * Do not install the stunnel tool anymore, it shouldn\u2019t be needed by anything anymore. [...]\n    * Move temporary directories related to Arch Linux into a single directory for clarity. [...]\n    * Update the arm64 architecture host keys. [...]\n    * Use a common Postfix configuration. [...]\n\nThe following changes were also made: by\n\n  * Jan-Benedict Glaw:\n\n    * Initial work to clean up a messy NetBSD-related script. [...][...]\n  * Roland Clobus:\n\n    * Show the installer log if the installer fails to build. [...]\n    * Avoid the minus character (i.e. -) in a variable in order to allow for tags in openQA. [...]\n    * Update the schedule of Debian live image builds. [...]\n  * Vagrant Cascadian:\n\n    * Maintenance on the virt* nodes is completed so bring them back online. [...]\n    * Use the fully qualified domain name in configuration. [...]\n\nNode maintenance was also performed by Holger Levsen, Mattia Rizzolo\n[...][...] and Vagrant Cascadian [...][...][...][...]\n\nIf you are interested in contributing to the Reproducible Builds project,\nplease visit our Contribute page on our website. However, you can get in touch\nwith us via:\n\n  * IRC: #reproducible-builds on irc.oftc.net.\n\n  * Twitter: @ReproBuilds\n\n  * Mastodon: @reproducible_builds@fosstodon.org\n\n  * Mailing list: rb-general@lists.reproducible-builds.org\n\n\u2190 View all our monthly reports\n\nFollow us on Twitter @ReproBuilds, Mastodon @reproducible_builds@fosstodon.org\n& Reddit and please consider making a donation. \u2022 Content licensed under CC\nBY-SA 4.0, style licensed under MIT. Templates and styles based on the Tor\nStyleguide. Logos and trademarks belong to their respective owners. \u2022 Patches\nfor this website welcome via our Git repository (instructions) or via our\nmailing list. \u2022 Full contact info\n\n", "frontpage": false}
