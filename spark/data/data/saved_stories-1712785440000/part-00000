{"aid": "39991974", "title": "Query Your C Code", "url": "https://hackaday.com/2024/04/08/query-your-c-code/", "domain": "hackaday.com", "votes": 1, "user": "gvxvik", "posted_at": "2024-04-10 15:42:04", "comments": 0, "source_title": "Query Your C Code", "source_text": "Query Your C Code | Hackaday\n\nSkip to content\n\n# Hackaday\n\n# Query Your C Code\n\n17 Comments\n\n  * by:\n\nAl Williams\n\nApril 8, 2024\n\nIf you\u2019ve ever worked on a large project \u2014 your own or a group effort \u2014 you\nknow it can be difficult to find exactly where you want to be in the source\ncode. Sure, you can use ctags and most other editors have some way of\nsearching for things. But ClangQL from [AmrDeveloper] lets you treat your code\nbase like a database.\n\nHonestly, we\u2019ve often thought about writing something that parses C code and\nstuffs it into a SQL database. This tool leverages the CLang parser and lets\nyou write queries like:\n\n    \n    \n    SELECT * FROM functions\n\nThat may not seem like the best example, but how about:\n\n    \n    \n    SELECT COUNT(name) FROM functions WHERE return_type=\"int\"\n\nThat\u2019s a bit more interesting. The functions table provides each function\u2019s\nname, signature, a count of arguments, a return type, and a flag to indicate\nmethods. We hope the system will grow to let you query on other things, too,\nlike variables, templates, preprocessor defines, and data types. The tool can\nhandle C or C++ and could probably work with other CLang front ends with a\nlittle work.\n\nThis would be great for estimating the difficulty of tasks. Imagine asking for\nhow many functions return a float when trying to decide how long it would take\nto switch to fixed point. We plan to try it on a source tree for the Linux\nkernel and give it a spin.\n\nTruthfully, we\u2019ve long been surprised databases haven\u2019t taken over as file\nsystems and source code anyway. A lot of what we do in git could be done in a\ndatabase. And vice-versa.\n\nPosted in Software DevelopmentTagged database\n\n## 17 thoughts on \u201cQuery Your C Code\u201d\n\n  1. The Commenter Formerly Known As Ren says:\n\nApril 8, 2024 at 7:19 pm\n\nFIND bug TYPE memory_leak WHERE all\n\nReport comment\n\nReply\n\n    1. Zoe Nagy says:\n\nApril 9, 2024 at 2:13 am\n\nDon\u2019t use dynamic mEmoRy.\n\nReport comment\n\nReply\n\n  2. SayWhat? says:\n\nApril 8, 2024 at 8:49 pm\n\nSelect optimized code from spaghetti\n\nReport comment\n\nReply\n\n    1. Dazzleworth says:\n\nApril 9, 2024 at 3:47 am\n\nReverse engineering software packages like JEB, JADX, Ida Pro and Ghidra\nactually saves decompiler code in a database like format, actually. It\u2019s\nnoting new. Until someone decides to implement an open source version\n\nReport comment\n\nReply\n\n  3. Scott Howell says:\n\nApril 8, 2024 at 9:29 pm\n\nUpdate private_vars set (select\nirrelevant_vars)=concat(function,\u2019_\u2019,irrelevant_var) where\nvars_make_no_sense_or_are_too_long with ai_query(best_prompt);\n\nReport comment\n\nReply\n\n  4. Gravis says:\n\nApril 9, 2024 at 12:20 am\n\nSo I was very interested in this and the author\u2019s similar *QL projects and\nafter drilling down into the code I found it to be yet another poorly\nimplemented database. I like from scratch implementations as much as the next\nprogrammer but small in memory databases are a solved problem! Seriously, just\nuse sqlite, it\u2019s a small efficient library that is absolutely bulletproof.\n\nReport comment\n\nReply\n\n    1. jrbloom says:\n\nApril 9, 2024 at 1:20 am\n\nFair comment from a practical standpoint. But sometimes it\u2019s more about the\njourney than the end product, and doing it all yourself is interesting/fun.\nStill an interesting idea, either way.\n\nReport comment\n\nReply\n\n    2. nipah says:\n\nApril 9, 2024 at 8:12 am\n\nSQLite is shit if you don\u2019t want to write your code in strings or if you just\nwant unstructured data. Saying something is a \u201csolved problem\u201d means nothing.\n\nReport comment\n\nReply\n\n      1. Rick C says:\n\nApril 9, 2024 at 12:15 pm\n\nExcept it does. Not to insult this project but I worked at a place 20 years\nago that had something like this, except you didn\u2019t write sql. And to give a\nbetter example than what\u2019s in the article, you\u2019d use it for stuff like \u201cwe\u2019re\nadding a new field to a database table. Show me every program that references\nthat table\u201d so you knew the entire list of source files you\u2019d need to look at\nto see if they needed updates, and could compile all of them for testing. Iirc\nwe also integrated our source control so you could check them all out in one\ngo.\n\nThis was all stored in a database, updated at each code check in. The database\nwas the same commercial product or application used (think something like\nMSSQL, although that wasn\u2019t the specific product. ) saves a ton of time.\n\nReport comment\n\nReply\n\n        1. Ostracus says:\n\nApril 10, 2024 at 5:43 am\n\nSounds like a fit for DOP.\n\nhttps://www.manning.com/books/data-oriented-programming\n\nReport comment\n\nReply\n\n  5. maarten says:\n\nApril 9, 2024 at 12:41 am\n\nIt\u2019s funny to see that it\u2019s implemented in rust.\n\nReport comment\n\nReply\n\n  6. aki009 says:\n\nApril 9, 2024 at 1:44 am\n\nHammer looking for a nail disease. *QL is not the way, young padawan. Let it\ndie in peace.\n\nReport comment\n\nReply\n\n  7. Ben says:\n\nApril 9, 2024 at 5:11 am\n\nDoes C not have a LSP compatible thing like every other major language?\n\nReport comment\n\nReply\n\n  8. Ben says:\n\nApril 9, 2024 at 5:19 am\n\n\u201cA lot of what we do in git could be done in a database.\u201d\n\nWhich is what Fossil does. No coincidence it was created by the same guy as\nSQLite.\n\nReport comment\n\nReply\n\n    1. Leaf-Eye P. says:\n\nApril 9, 2024 at 11:22 pm\n\nAlso, Git is already a bloody database... NoSQL, but a database nevertheless.\n\nGit noobs.\n\nReport comment\n\nReply\n\n      1. Ben says:\n\nApril 10, 2024 at 1:07 am\n\nYes, of course. So is your plain old file system, a spreadsheet (just puked a\nlittle), a drawer full of papers, or a pile of mail on the floor.\n\nReport comment\n\nReply\n\n  9. Leaf-Eye P. says:\n\nApril 9, 2024 at 11:27 pm\n\ngit rekt: Git is already a database, always has been. If you didn\u2019t already\nknow that, and have been wishing it were this whole time, I genuinely suggest\nyou learn more about Git.\n\nReport comment\n\nReply\n\n### Leave a ReplyCancel reply\n\nPlease be kind and respectful to help make the comments section excellent.\n(Comment Policy)\n\nThis site uses Akismet to reduce spam. Learn how your comment data is\nprocessed.\n\n# Search\n\n# Never miss a hack\n\nFollow on facebook Follow on twitter Follow on youtube Follow on rss Contact\nus\n\n# Subscribe\n\n# If you missed it\n\n  * ## In A Twist, Humans Take Jobs From AI\n\n36 Comments\n\n  * ## Heating Mars On The Cheap\n\n71 Comments\n\n  * ## Where Graph Theory Meets The Road: The Algorithms Behind Route Planning\n\n31 Comments\n\n  * ## Space Mirrors: Dreams Of Turning The Night Into Day Around The Clock\n\n27 Comments\n\n  * ## Mining And Refining: Tungsten\n\n15 Comments\n\nMore from this category\n\n# Our Columns\n\n  * ## Ultimate Power: Lithium-Ion Packs Need Some Extra Circuitry\n\n14 Comments\n\n  * ## Hackaday Links: April 7, 2024\n\n11 Comments\n\n  * ## Understand Your Tools: Finger Exercises\n\n8 Comments\n\n  * ## Fictional Computers: The Three Body Problem\n\n54 Comments\n\n  * ## Hackaday Podcast Episode 265: Behind The Epic SSH Hack, 1980s Cyber Butler, The Story Of Season 7\n\nNo comments\n\nMore from this category\n\n# Search\n\n# Never miss a hack\n\nFollow on facebook Follow on twitter Follow on youtube Follow on rss Contact\nus\n\n# Subscribe\n\n# If you missed it\n\n  * ## In A Twist, Humans Take Jobs From AI\n\n36 Comments\n\n  * ## Heating Mars On The Cheap\n\n71 Comments\n\n  * ## Where Graph Theory Meets The Road: The Algorithms Behind Route Planning\n\n31 Comments\n\n  * ## Space Mirrors: Dreams Of Turning The Night Into Day Around The Clock\n\n27 Comments\n\n  * ## Mining And Refining: Tungsten\n\n15 Comments\n\nMore from this category\n\n# Categories\n\n# Our Columns\n\n  * ## Ultimate Power: Lithium-Ion Packs Need Some Extra Circuitry\n\n14 Comments\n\n  * ## Hackaday Links: April 7, 2024\n\n11 Comments\n\n  * ## Understand Your Tools: Finger Exercises\n\n8 Comments\n\n  * ## Fictional Computers: The Three Body Problem\n\n54 Comments\n\n  * ## Hackaday Podcast Episode 265: Behind The Epic SSH Hack, 1980s Cyber Butler, The Story Of Season 7\n\nNo comments\n\nMore from this category\n\n# Recent comments\n\n  * tylerl on How DEC\u2019s LANBridge 100 Gave Ethernet A Fighting Chance\n  * spaceminions on Double-Checking NASA\u2019s Eclipse Estimate At Home\n  * ThoriumBR on On Cloud Computing And Learning To Say No\n  * spaceminions on Emails Over Radio\n  * Les Wright on Homebrew Network Card With No CPU\n  * Elliot Williams on Hackaday Europe Is Almost Here, Last Call For Tickets\n  * Elliot Williams on Hackaday Europe Is Almost Here, Last Call For Tickets\n  * reg on How DEC\u2019s LANBridge 100 Gave Ethernet A Fighting Chance\n  * Panondorf on Wear Testing Different 3D Printer Filaments\n  * Paul on 1950s Switching Power Supply Does It Mechanically\n\n# Now on Hackaday.io\n\n  * kosovomp liked Your Secret Weapon for Wireless Networks-Wardriver.\n  * William Chundak liked The $50 Ham: Dummy Loads.\n  * FulanoDetail has updated the log for DIY Mech/Exoskeleton suit..\n  * thpoll liked 25in24 Electronics Project Board.\n  * Steven J Greenfield wrote a comment on project log Belt tension vs frequency calculation.\n  * rchadwick7 liked EMP Generator.\n  * Steven J Greenfield wrote a comment on project log Belt tension vs frequency calculation.\n  * rchadwick7 liked ESP32 E-Paper Weather Display.\n  * Igor has added MassimilianoBassanetti as a contributor to CRISS CP/M 8-bit Homebrew DIY Computer (AVR based).\n  * rchadwick7 liked Your Secret Weapon for Wireless Networks-Wardriver.\n\n  * Home\n  * Blog\n  * Hackaday.io\n  * Tindie\n  * Hackaday Prize\n  * Video\n  * Submit A Tip\n  * About\n  * Contact Us\n\n# Never miss a hack\n\nFollow on facebook Follow on twitter Follow on youtube Follow on rss Contact\nus\n\n# Subscribe to Newsletter\n\nCopyright \u00a9 2024 | Hackaday, Hack A Day, and the Skull and Wrenches Logo are Trademarks of Hackaday.com | Privacy Policy | Terms of Service | Digital Services Act Powered by WordPress VIP\n\nBy using our website and services, you expressly agree to the placement of our\nperformance, functionality and advertising cookies. Learn more\n\n", "frontpage": false}
